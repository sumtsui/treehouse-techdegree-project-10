extends ../layout

block content
  h1 New Loan
  include ../errorMsg
  form(method='post' action='/loans/new')
    p
      label(for='book_id') Book
      select#book_id(name='book_id')
        each book in books
          option(value=`${book.id}`) #{book.title}
    p
      label(for='patron_id') Patron
      select#patron_id(name='patron_id')
        each patron in patrons
          option(value=`${patron.id}`) #{patron.first_name} #{patron.last_name}
    p
      label(for='loaned_on') Loaned on:
      input#loaned_on(name='loaned_on' type='text', value=(inputs ? inputs.loaned_on : `${new Date().toJSON().slice(0, 10)}`))
    p
      label(for='return_by') Return by:
      input#return_by(name='return_by' type='text', value=(inputs ? inputs.return_by : `${new Date((new Date()).getTime() + (7 * 86400000)).toJSON().slice(0, 10)}`))
    p
      input(type='submit', value='Create New Loan')
